<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>StoreCollect Yoco Test</title>
<script src="https://js.yoco.com/sdk/v1/yoco-sdk-web.js"></script>
<style>
body { font-family: Arial; text-align:center; padding:20px; background:#f3f3f3; }
.container { max-width:400px; margin:auto; background:white; padding:20px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.1);}
button { width:100%; padding:12px; font-size:16px; border:none; border-radius:8px; background:black; color:white; cursor:pointer; }
button:hover { background:#333; }
#status { margin-top:20px; padding:12px; border-radius:8px; font-weight:bold; word-break: break-word; }
.success { background:#d4edda; color:#155724; }
.error { background:#f8d7da; color:#721c24; }
.info { background:#fff3cd; color:#856404; }
</style>
</head>
<body>

<div class="container">
<h2>StoreCollect Yoco Test</h2>

<button id="payButton">Pay Now (Test R1)</button>

<div id="status" class="info">Click "Pay Now" to open Yoco popup.</div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const statusEl = document.getElementById("status");
  const payButton = document.getElementById("payButton");

  // Initialize Yoco with your test public key
  const yoco = new YocoSDK({ publicKey: "pk_test_a3abafa43ol0djK02ad4" });

  payButton.addEventListener("click", () => {
    console.log("Pay Now button clicked!"); // Debug click

    statusEl.textContent = "⏳ Opening Yoco popup...";
    statusEl.className = "info";

    try {
      yoco.showPopup({
        amountInCents: 100, // R1 test payment
        currency: "ZAR",
        name: "StoreCollect Test",
        description: "Minimal test",
        callbacks: {
          onSuccess: function(result){
            console.log("Yoco result (should have token):", result);
            if(result && result.id){
              statusEl.textContent = "✅ Payment successful! Token: " + result.id;
              statusEl.className="success";
            } else {
              statusEl.textContent = "⚠ Payment failed: No token returned";
              statusEl.className="error";
            }
          },
          onError: function(err){
            console.error("Yoco error:", err);
            statusEl.textContent = "⚠ Payment failed: " + (err.message || "Check console");
            statusEl.className="error";
          }
        }
      });
    } catch(err){
      console.error("Yoco exception:", err);
      statusEl.textContent = "⚠ Yoco initialization failed: "+err.message;
      statusEl.className="error";
    }
  });
});
</script>

</body>
</html>
