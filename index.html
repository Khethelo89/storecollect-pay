{% if product.available %}
  <div class="product__buttons">
    <!-- Add to Cart -->
    <form method="post" action="/cart/add">
      <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
      <input type="number" name="quantity" value="1" min="1" class="product-quantity" />
      <button type="submit" class="btn btn--add-to-cart">
        Add to Cart
      </button>
    </form>

    <!-- Buy Now / Checkout -->
    <button type="button" class="btn btn--buy-now" onclick="redirectToYoco()">
      Buy It Now
    </button>
  </div>
{% else %}
  <p class="product__sold-out">Sold Out</p>
{% endif %}

<script>
function redirectToYoco() {
  const variantId = "{{ product.selected_or_first_available_variant.id }}";
  const quantity = document.querySelector('.product-quantity').value || 1;
  const price = {{ product.selected_or_first_available_variant.price | divided_by: 100.0 }};
  const title = "{{ product.title | escape }}";

  const url = `https://storecollect-pay.vercel.app/?variantId=${variantId}&quantity=${quantity}&price=${price}&title=${title}`;
  window.location.href = url;
}
</script>

<style>
.product__buttons {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 20px;
}
.product__buttons .btn {
  background-color: #2ecc71;
  color: #fff;
  padding: 16px;
  font-size: 16px;
  font-weight: bold;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  width: 100%;
}
.product__buttons .btn:hover {
  background-color: #27ae60;
}
.product__sold-out {
  color: #e74c3c;
  font-weight: bold;
  font-size: 18px;
  margin-top: 20px;
}
</style>





