<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Thank You - StoreCollect</title>
  <style>
    body { font-family: Arial; background:#f3f3f3; text-align:center; padding:50px; }
    .container { background:white; padding:30px; border-radius:12px; max-width:600px; margin:auto; box-shadow:0 4px 10px rgba(0,0,0,0.1); }
    table { width:100%; border-collapse: collapse; margin:20px 0; }
    th, td { border-bottom:1px solid #ccc; padding:8px; text-align:left; }
    h1 { color: green; }
    a { display:inline-block; margin-top:20px; padding:10px 20px; background:black; color:white; text-decoration:none; border-radius:8px; }
    a:hover { background:#333; }
  </style>
</head>
<body>

<div class="container">
  <h1>ðŸŽ‰ Thank You!</h1>
  <p id="customerInfo"></p>

  <h3>Order Details:</h3>
  <table>
    <thead>
      <tr><th>Product</th><th>Qty</th><th>Price</th></tr>
    </thead>
    <tbody id="orderTable"></tbody>
  </table>
  <h3>Total: R<span id="totalAmount">0</span></h3>

  <a href="https://storecollect.net">Back to StoreCollect</a>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const params = new URLSearchParams(window.location.search);

  // Customer info
  const firstName = params.get("firstName") || "";
  const lastName = params.get("lastName") || "";
  const email = params.get("email") || "";
  document.getElementById("customerInfo").textContent = `Customer: ${firstName} ${lastName} | Email: ${email}`;

  // Order info
  const titles = params.getAll("title");
  const prices = params.getAll("price");
  const qtys = params.getAll("qty");

  const tbody = document.getElementById("orderTable");
  let total = 0;

  for (let i = 0; i < titles.length; i++) {
    const tr = document.createElement("tr");
    const price = parseFloat(prices[i] || 0);
    const qty = parseInt(qtys[i] || 1);
    tr.innerHTML = `<td>${decodeURIComponent(titles[i])}</td><td>${qty}</td><td>R${price}</td>`;
    tbody.appendChild(tr);
    total += price * qty;
  }

  document.getElementById("totalAmount").textContent = total;
});
</script>

</body>
</html>
