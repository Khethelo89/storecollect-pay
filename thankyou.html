<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>StoreCollect - Thank You</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f7f7f7;
        padding: 20px;
        margin: 0;
    }

    .container {
        max-width: 650px;
        margin: auto;
        background: white;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .logo {
        width: 140px;
        display: block;
        margin: 0 auto 15px auto;
    }

    h2 {
        text-align: center;
        color: #333;
        margin-bottom: 10px;
    }

    .highlight-box {
        background: #ffe9d6;
        padding: 12px;
        border-radius: 8px;
        margin-bottom: 15px;
        border-left: 5px solid #ff8c42;
    }

    .row { margin: 10px 0; font-size: 16px; }

    h3 {
        border-bottom: 2px solid #ff8c42;
        padding-bottom: 6px;
        color: #333;
    }

    .cart-item {
        border-bottom: 1px solid #ddd;
        padding: 10px 0;
    }

    .btn {
        display: block;
        text-align: center;
        margin-top: 25px;
        background: #ff8c42;
        color: white;
        padding: 12px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        transition: 0.2s;
    }

    .btn:hover {
        background: #e57732;
    }

    /* Scrollable cart if too long */
    #cartItems {
        max-height: 300px;
        overflow-y: auto;
    }
</style>
</head>

<body>
<div class="container">

    <!-- StoreCollect Logo -->
    <img src="https://i.ibb.co/RyZqv7g/storecollect-logo.png" class="logo" alt="StoreCollect">

    <h2>Thank You for Your Order!</h2>

    <div class="highlight-box">
        <strong>Delivery Time:</strong> Your order will be delivered within <strong>3–5 business days</strong>.
    </div>

    <div class="row"><strong>Name:</strong> <span id="name"></span></div>
    <div class="row"><strong>Total Paid:</strong> R<span id="total"></span></div>
    <div class="row"><strong>Shipping Cost:</strong> R<span id="shipping"></span></div>
    <div class="row"><strong>Order Number:</strong> <span id="orderNumber"></span></div>

    <h3>Items Ordered</h3>
    <div id="cartItems"></div>

    <!-- Back to store button -->
    <a href="https://storecollect.net" class="btn">Back to Store</a>

</div>

<script>
(function() {
    const params = new URLSearchParams(window.location.search);

    document.getElementById("name").textContent = params.get("name") || "Customer";
    document.getElementById("total").textContent = params.get("total") || "0.00";
    document.getElementById("shipping").textContent = params.get("shipping") || "0";
    document.getElementById("orderNumber").textContent = params.get("orderNumber") || "N/A";

    const cartData = params.get("cart");
    const cartContainer = document.getElementById("cartItems");

    if (cartData) {
        try {
            // Decode URI and parse JSON safely
            const decoded = decodeURIComponent(cartData);
            const cart = JSON.parse(decoded);

            if (cart.length === 0) {
                cartContainer.innerHTML = "<p>No items found in cart.</p>";
            } else {
                const html = cart.map(item => `
                    <div class="cart-item">
                        <strong>${item.title || "Item"}</strong><br>
                        Qty: ${item.qty || 1} × R${item.price || 0}<br>
                        <strong>Subtotal:</strong> R${((item.qty || 1)*(item.price || 0)).toFixed(2)}
                    </div>
                `).join("");
                cartContainer.innerHTML = html;
            }

        } catch (e) {
            console.error("Error parsing cart JSON:", e);
            cartContainer.innerHTML = "<p>Could not load cart items.</p>";
        }
    } else {
        cartContainer.innerHTML = "<p>No cart data available.</p>";
    }
})();
</script>

</body>
</html>
